function back(){if((navigator.userAgent.indexOf("MSIE")>=0)&&(navigator.userAgent.indexOf("Opera")<0)){if(history.length>0){window.history.go(-1)}else{window.opener=null;window.close()}}else{if(navigator.userAgent.indexOf("Firefox")>=0||navigator.userAgent.indexOf("Opera")>=0||navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Chrome")>=0||navigator.userAgent.indexOf("WebKit")>=0){if(window.history.length>1){window.history.go(-1)}else{window.location.href=webRoot+"/"}}else{window.history.go(-1)}}}function blankPost(b,f){var e=document.createElement("form");e.action=b;e.target="_blank";e.method="post";e.style.display="none";var d;for(var a in f){if(typeof f[a]=="object"){for(var c in f[a]){d=document.createElement("input");d.setAttribute("type","checkbox");d.name=a+"[]";d.value=f[a][c];d.setAttribute("checked","checked");e.appendChild(d)}}else{d=document.createElement("textarea");d.name=a;d.value=f[a];e.appendChild(d)}}d=document.createElement("textarea");d.name="wetest_crsftoken";d.value=getCookie("wetest_token");e.appendChild(d);document.body.appendChild(e);e.submit()}function readProtocol(){$("input[type=checkbox][name=hasread]").prop("checked",true);showModal({url:webRoot+"/introduce/protocol/",title:"WeTest质量开放平台用户协议",size:"large",showFooter:true})}function checkEmail(a){var b=/^([\.\w_-])+@([\w_-])+(\.[\w_-]+)+$/;if(!b.test(a)){return false}return true}function checkNum(a){if(!a){return false}return !isNaN(a)}function checkLength(d,c,b){c==undefined&&(c=2);b==undefined&&(b=15);var a=d.gblen();if(a<c||a>b){return false}return true}function checkUrl(a){var b=/^http(s)?:\/\/.+(\..+)+$/;if(!b.test(a)){return false}return true}function checkValue(a,b){if(b==undefined){b=/^([\w \-_()（）\u4e00-\u9fa5]+)$/}if(!a.match(b)){return false}else{return true}}function checkPhone(a){if(!a.match(/^1[3|4|5|7|8][0-9]\d{8}$/)||a.length!=11){return false}else{return true}}function checkPhoneCode(a){if(!a.match(/^[0-9]\d{4,8}$/)||a.length!=6){return false}else{return true}}function removeCheck(a){$("#"+a+"_check").removeClass("has-success has-error");$("#"+a+"_icon").removeClass("glyphicon-ok glyphicon-remove")}function addError(a,b){$("#"+a+"_check").removeClass("has-success").addClass("has-error");$("#"+a+"_icon").removeClass("glyphicon-ok").addClass("glyphicon-remove");$("#"+a+"_msg").html('<span class="logo gerror"></span> '+b)}function addCorrect(a){$("#"+a+"_check").removeClass("has-error").addClass("has-success");$("#"+a+"_icon").removeClass("glyphicon-remove").addClass("glyphicon-ok")}function addErrorByClass(a,b){$("."+a+"_check").removeClass("has-success").addClass("has-error");$("#"+a+"_icon").removeClass("glyphicon-ok").addClass("glyphicon-remove");$("#"+a+"_msg").html('<span class="logo gerror"></span> '+b)}function addCorrectByClass(a){$("."+a+"_check").removeClass("has-error").addClass("has-success");$("#"+a+"_icon").removeClass("glyphicon-remove").addClass("glyphicon-ok")}function checkTaggle(b,a){$('input[type="checkbox"][name="'+a+'"]').prop("checked",b)}function reCharge(){showModal({url:webRoot+"/order/recharge/",title:"充值",showFooter:false})}function setReason(a,b){showModal({title:"拒绝理由",url:webRoot+"/ajax/refuse-reason/",func:a,funcParam:b})}function cancel(b,a){Doconfirm("确认要撤销吗？",function(){$.ajax({type:"POST",url:webRoot+"/application/cancel/",data:{a_id:b},success:function(d){var c=$.parseJSON(d);if(c.flag){Doalert("撤销成功",function(){if(a){$(a).AjaxTable(undefined,"reload")}else{window.location.reload()}})}else{Doalert(c.error)}}})})}function dealRecords(c,a,d,b){var b=b||webRoot+"/application/deal-records/";if(a=="no"&&!$.trim($("#reason_comment").val())){$("#snotice").showMsg("必须填写理由");return}$.ajax({type:"POST",url:b,data:{a_id:c,permission:a,reason:$("#reason_comment").val()},success:function(f){var e=$.parseJSON(f);if(e.flag){Doalert(e.ret.length?e.ret:"操作成功",function(){if(d){$(d).AjaxTable(undefined,"reload");hideModal()}else{window.location.reload()}})}else{if(a=="no"){$("#snotice").showMsg(e.error)}else{Doalert(e.error)}}}})}function checkEnter(f,h){if(f.which==13){var d=$(h).data("obj");var c=$(h).val();var a={value:c};var i=$(h).data("extends");if(i){for(var b in i){var g=i[b];a[b]=$(g).val()}}$(d).AjaxTable(undefined,a)}}function search(g){var b=$(g).prevAll("input");var d=$(b).val();var e=$(b).data("obj");var a={value:d};var h=$(b).data("extends");if(h){for(var c in h){var f=h[c];a[c]=$(f).val()}}$(e).AjaxTable(undefined,a)}function getFormArray(c){var a={};var e=c.serializeArray();for(var b in e){var d=e[b];if(!a[d.name]){a[d.name]=d.value}else{if(typeof a[d.name]=="string"){if(a[d.name]!=d.value){a[d.name]=[a[d.name],d.value]}}else{if(!in_array(d.value,a[d.name])){a[d.name].push(d.value)}}}}return a}function getFormString(c){var e=getFormArray(c);var d=[];for(var b in e){if(typeof e[b]==="object"){for(var a in e[b]){d.push(b+"[]="+e[b][a])}}else{d.push(b+"="+e[b])}}return d.join("&")}var JPlaceHolder={_check:function(){return"placeholder" in document.createElement("input")},init:function(){if(!this._check()){this.fix()}},fix:function(){var a=this;jQuery(":input[placeholder]:visible").each(function(c,d){var b=$(this);b.data("isPlaceHolder",1);a.place(b)});$(document).on("mouseenter","input[placeholder]",function(){if(!$(this).data("isPlaceHolder")){a.place($(this));$(this).data("isPlaceHolder",1)}})},place:function(c){if(c.is(":hidden")||c.css("opacity")==0){return}var a=c.attr("placeholder");c.wrap($("<div></div>").css({position:"relative",zoom:"1",border:"none",background:"none","white-space":"nowrap",padding:"none",margin:"none",display:"inline-block",width:c.outerWidth(),height:c.outerHeight(),"float":c.css("float")}));var i=c.position(),e=c.outerHeight(),g=c.css("padding-left"),b=parseInt(c.css("border-left-width")),f=parseInt(c.css("border-top-width"));var d=$("<span></span>").text(a).css({position:"absolute",left:i.left+b,top:i.top+f,height:e-2*f,lineHeight:e-2*f+"px",paddingLeft:g,color:"#aaa",backgroundColor:c.css("background-color"),border:"none"}).appendTo(c.parent());if(c.val()){d.hide()}c.focusin(function(h){d.hide()}).focusout(function(h){if(!c.val()){d.show()}});d.click(function(h){d.hide();c.focus()})}};function resize(){var a=($(window).height())-50;$(".personBody .selfCenter").height(a+"px")}$(function(){JPlaceHolder.init();$(".selfCenter .userModules>ul").each(function(){if($(this).find("li").length<=0){$(this).find(".cata-xia").hide();$(this).removeClass("active")}else{$(this).find(".cata-xia").show();$(this).addClass("active")}});$(".selfCenter").on("click",".userModules>ul>.text",function(){if($(this).parent("ul").find("li").length>0){$(this).parent("ul").toggleClass("active");$(this).siblings().toggleClass("dn");$(this).find($(".cata-xia")).toggleClass("on")}});$(".last-cata-outbox").on("click",".last-cata",function(){if($(this).next(".last-inner-cata").length>0){$(this).parent(".last-cata-out").toggleClass("active");$(this).siblings().toggleClass("dn");$(this).find($(".cata-xia")).toggleClass("on")}});resize();$(window).resize(resize)});function goHelpSearch(a){var b=$(a).val().trim();if(b==""){return}window.location.href=webRoot+"/main/search?text="+b}function inputModel(a,e,k,b,h){if($("#inputModel-"+a).length<1){var c=$("#"+a);c.hide();var j=c.attr("placeholder");b=b||c.attr("defaultkey");h=h||c.attr("defaultval");b=b||"";h=h||"";k=k||"";var g="";for(var d in e){g+='<li data-key="'+e[d][1]+'" data-val="'+e[d][0]+'" data-for="'+a+'"><span class="inputModel-list-key" data-key="'+e[d][1]+'" data-val="'+e[d][0]+'" data-for="'+a+'">'+e[d][1]+'</span><span class="inputModel-list-val" data-key="'+e[d][1]+'" data-val="'+e[d][0]+'" data-for="'+a+'">'+e[d][0]+"</span></li>"}var f='<div class="inputModel '+k+'" id="inputModel-'+a+'"><button class="inputModel-btn" type="button" id="inputModel-btn-'+a+'" value="'+(b||e[0][0])+'">'+(b||e[0][0])+'</button><span class="inputModel-line"></span><input class="inputModel-input" id="inputModel-input-'+a+'" type="text" placeholder="'+(j||"")+'" data-for="'+a+'" value="'+(h||"")+'"><ul class="inputModel-list">'+g+"</ul></div>";c.val(e[0][0]);c.before(f)}}$(document).on("click",".inputModel-btn",function(){$(this).parent().addClass("active")});$(document).on("click",function(a){if(!$(a.target).hasClass("inputModel")&&$(a.target).parents(".inputModel").length==0){$(".inputModel").removeClass("active")}});$(document).on("blur",".inputModel-input",function(){var b=$(this).data("for");var a=$("#inputModel-btn-"+b).val()+""+$(this).val();$("#"+b).val(a)});$(document).on("click",".inputModel-list li, .inputModel-list li span",function(){var a=$(this).data("key");var b=$(this).data("val");var c=$(this).data("for");if($(this)[0].localName=="li"){$(this).addClass("sur")}else{$(this).parent().addClass("sur")}$("#"+c).val(b+""+$("#inputModel-input-"+c).val());$("#inputModel-btn-"+c).text(b).val(b);$(".inputModel").removeClass("active")});